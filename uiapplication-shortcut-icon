#!/bin/sh

# https://github.com/davidfmiller/bin/

if [[ "`which sips`" = "" ]]
then 
  >&2 echo "ğŸš«  OS X only"
  exit 1
fi

if [ ! -e $1 ]
then
  >&2 echo "ğŸš«  No icon file provided"
  exit 1
fi

filename=$(basename "$1")
extension="${filename##*.}"
target="$HOME/Desktop/${filename%.*}"

if [ -d "$target" ]
then
  echo "ğŸš«  Destination folder '$target' already exists"
  exit 1
fi

mkdir "$target"

sips -Z 104 "$1" --out "$target/application-shortcut-icon@3x.${extension}"
sips -Z 70 "$1" --out "$target/application-shortcut-icon@2x.${extension}"

echo "# uiapplication-shortcut-icon

Generated by [uiapplication-shortcut-icon](https://github.com/davidfmiller/bin/)

"  > "$target/readme.md"

open "$target"